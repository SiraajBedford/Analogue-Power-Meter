Version 4
SHEET 1 1924 680
WIRE -1616 -592 -1840 -592
WIRE -1392 -592 -1616 -592
WIRE -1616 -576 -1616 -592
WIRE -1392 -544 -1392 -592
WIRE -1840 -512 -1840 -592
WIRE -1616 -448 -1616 -496
WIRE -1456 -448 -1456 -496
WIRE -1456 -448 -1536 -448
WIRE -1376 -448 -1392 -448
WIRE -1840 -384 -1840 -432
WIRE -1616 -368 -1616 -448
WIRE -1376 -336 -1376 -448
WIRE -1312 -336 -1376 -336
WIRE -1200 -336 -1248 -336
WIRE -1088 -336 -1136 -336
WIRE -944 -336 -1088 -336
WIRE -912 -336 -944 -336
WIRE -896 -336 -912 -336
WIRE -1760 -320 -1840 -320
WIRE -1248 -256 -1248 -336
WIRE -1616 -240 -1616 -272
WIRE -1376 -224 -1376 -336
WIRE -944 -192 -944 -336
WIRE -1840 -176 -1840 -320
WIRE -1520 -176 -1840 -176
WIRE -1088 -176 -1088 -336
WIRE -1840 -128 -1840 -176
WIRE -560 -112 -640 -112
WIRE -512 -112 -560 -112
WIRE -416 -112 -448 -112
WIRE -368 -112 -416 -112
WIRE -336 -112 -368 -112
WIRE -1376 -96 -1376 -128
WIRE -560 -96 -560 -112
WIRE -416 -96 -416 -112
WIRE -336 -96 -336 -112
WIRE -640 0 -640 -32
WIRE -560 0 -560 -32
WIRE -560 0 -640 0
WIRE -512 0 -560 0
WIRE -480 0 -480 -48
WIRE -480 0 -512 0
WIRE -416 0 -416 -32
WIRE -416 0 -480 0
WIRE -336 0 -336 -16
WIRE -336 0 -416 0
WIRE -1840 16 -1840 -48
WIRE -1376 16 -1376 -16
WIRE -1376 16 -1840 16
WIRE -1248 16 -1248 -192
WIRE -1248 16 -1376 16
WIRE -1088 16 -1088 -112
WIRE -1088 16 -1248 16
WIRE -944 16 -944 -128
WIRE -944 16 -1088 16
WIRE -512 32 -512 0
WIRE -1840 48 -1840 16
WIRE -496 144 -576 144
WIRE -384 144 -432 144
WIRE -320 144 -384 144
WIRE -224 144 -320 144
WIRE -144 144 -224 144
WIRE 272 144 64 144
WIRE 320 144 272 144
WIRE 368 144 320 144
WIRE 496 144 448 144
WIRE 512 144 496 144
WIRE 544 144 512 144
WIRE -576 176 -576 144
WIRE -384 176 -384 144
WIRE -144 176 -176 176
WIRE 160 176 64 176
WIRE 192 176 160 176
WIRE 272 176 272 144
WIRE -224 208 -224 144
WIRE -176 208 -176 176
WIRE -144 208 -176 208
WIRE 96 208 64 208
WIRE 512 208 320 208
WIRE 320 224 320 208
WIRE 160 240 160 176
WIRE 192 256 192 176
WIRE 208 256 192 256
WIRE 272 256 272 176
WIRE 544 256 544 144
WIRE 544 256 272 256
WIRE -576 336 -576 256
WIRE -384 336 -384 240
WIRE -384 336 -576 336
WIRE -224 336 -224 272
WIRE -224 336 -384 336
WIRE -176 336 -176 208
WIRE -176 336 -224 336
WIRE -48 336 -176 336
WIRE 96 336 96 208
WIRE 96 336 -48 336
WIRE 160 336 160 320
WIRE 160 336 96 336
WIRE -48 384 -48 336
FLAG -1840 48 0
FLAG -1616 -240 0
FLAG -1840 -384 0
FLAG -912 -336 -5V
FLAG -512 32 0
FLAG -368 -112 V_out
FLAG -320 144 V_out
FLAG -48 384 0
FLAG 320 224 0
FLAG 496 144 12V
SYMBOL npn -1680 -368 R0
SYMATTR InstName Q1
SYMATTR Value 2N3904
SYMBOL npn -1456 -544 R0
WINDOW 3 56 68 Invisible 2
SYMATTR Value 2N3904
SYMATTR InstName Q2
SYMBOL npn -1440 -224 R0
SYMATTR InstName Q3
SYMATTR Value 2N3904
SYMBOL voltage -1840 -144 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 46 55 Left 2
SYMATTR Value PULSE(0 5 0 0 0 50u 100u)
SYMATTR InstName V1
SYMBOL res -1664 -336 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL res -1424 -192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL res -1632 -592 R0
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL voltage -1840 -528 R0
SYMATTR InstName V2
SYMATTR Value 12
SYMBOL res -1520 -464 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 3.9k
SYMBOL res -1392 -112 R0
SYMATTR InstName R5
SYMATTR Value 33
SYMBOL cap -1248 -352 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 10µ
SYMBOL diode -1136 -352 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL diode -1264 -256 R0
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMBOL cap -1104 -176 R0
SYMATTR InstName C2
SYMATTR Value 100µ
SYMBOL zener -960 -192 R0
WINDOW 0 -31 34 Left 2
SYMATTR InstName D3
SYMATTR Value 1N750
SYMBOL voltage -640 -128 R0
WINDOW 0 0 -5 Left 2
WINDOW 3 -65 49 Left 2
SYMATTR InstName V3
SYMATTR Value 12
SYMBOL cap -576 -96 R0
SYMATTR InstName C3
SYMATTR Value 0.33µ
SYMBOL cap -432 -96 R0
SYMATTR InstName C4
SYMATTR Value 0.1µ
SYMBOL AutoGenerated\\LM7805 -480 -80 R0
SYMATTR InstName U1
SYMBOL res -352 -112 R0
SYMATTR InstName R6
SYMATTR Value 100
SYMBOL voltage -576 160 R0
WINDOW 0 -131 9 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -197 95 Left 2
SYMATTR InstName V_peak1
SYMATTR Value SINE(0 22.4 50)
SYMBOL diode -496 160 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D4
SYMBOL cap -400 176 R0
SYMATTR InstName C5
SYMATTR Value 150µ
SYMBOL cap -240 208 R0
WINDOW 3 -42 62 Left 2
WINDOW 0 -14 14 Left 2
SYMATTR Value 122µ
SYMATTR InstName C6
SYMBOL schottky 336 208 R180
WINDOW 0 -36 39 Left 2
WINDOW 3 -86 14 Left 2
SYMATTR InstName D5
SYMATTR Value 1N5822
SYMBOL res 144 224 R0
WINDOW 0 -31 51 Left 2
WINDOW 3 26 50 Left 2
SYMATTR InstName R7
SYMATTR Value 1k
SYMBOL res 288 160 R90
WINDOW 0 9 51 VBottom 2
WINDOW 3 20 54 VTop 2
SYMATTR InstName R8
SYMATTR Value 8.2k
SYMBOL cap 272 240 R90
WINDOW 0 1 40 VBottom 2
WINDOW 3 26 29 VTop 2
SYMATTR InstName Cff1
SYMATTR Value 3.3n
SYMBOL ind 352 160 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 13 90 VBottom 2
SYMATTR InstName L1
SYMATTR Value 68µ
SYMBOL cap 496 144 R0
WINDOW 0 -13 16 Left 2
WINDOW 3 -40 50 Left 2
SYMATTR InstName C7
SYMATTR Value 122µ
SYMBOL AutoGenerated\\LM2595_ADJ_TRANS -48 176 R0
SYMATTR InstName U2
TEXT -1288 -600 Left 2 !.inc 2N3904.lib
TEXT -1824 -40 Left 2 ;50% duty cycle from arduino PWM
TEXT -1840 -616 Left 2 ;12V From switchmode regulator
TEXT -736 -192 Left 2 !.inc LM78XX_RS.lib
TEXT -304 24 Left 2 !.inc LM2595_ADJ_TRANS.LIB
TEXT -304 48 Left 2 !.inc ST_POWER_SCHOTTKY_V6.LIB
TEXT -1874 408 Left 2 !.tran 0 1 0 1
